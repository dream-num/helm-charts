# Default values for univer-stack.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

global: {}

universer:
  enabled: true
  fullnameOverride: universer
  config:
    postgresql:
      host: postgresql
      port: 5432
      database: univer
      username: postgres
      password: postgres
    rabbitmq:
      host: rabbitmq
      port: 5672
      username: guest
      password: guest
    redis:
      addr: redis-master:6379
    transform:
      host: collaboration-server
      port: 5001
    apply:
      host: collaboration-server
      port: 5002
    node_snapshot:
      host: collaboration-server
      port: 5001
    s3:
      accessKeyID: admin
      accessKeySecret: minioadmin
      region: ""
      endpoint: http://minio:9000
      endpointPublic: http://minio:9000
      usePathStyle: true
      presignExpires: 3600s
    temporal:
      addr: temporal-frontend:7233
      namespace: default
    auth:
      enabled: false
      oidc:
        issuer: https://accounts.google.com
        clientID: "xxxx"
        clientSecret: "xxxxxxxxxx"
        redirectURL: "http://example.com/auth/callback"
        cookieDomain: "abc.example.com"

collaboration-server:
  fullnameOverride: collaboration-server
  config:
    univerServer: universer:8000
    snapshotServer: universer:9000
    saveSnapshotInterval: 3

worker:
  temporalServer:
    host: temporal-frontend:7233
    namespace: default

temporal:
  enabled: true
  fullnameOverride: temporal
  server:
    config:
      persistence:
        default:
          driver: "sql"
          sql:
            driver: "postgres12"
            host: postgresql
            port: 5432
            database: temporal
            user: postgres
            password: postgres
            maxConns: 20
            maxConnLifetime: "1h"

        visibility:
          driver: "sql"
          sql:
            driver: "postgres12"
            host: postgresql
            port: 5432
            database: temporal_visibility
            user: postgres
            password: postgres
            maxConns: 20
            maxConnLifetime: "1h"

  cassandra:
    enabled: false

  mysql:
    enabled: false

  postgresql:
    enabled: true

  prometheus:
    enabled: false

  grafana:
    enabled: false
    
  elasticsearch:
    enabled: false

  schema:
    setup:
      enabled: true
    update:
      enabled: true

postgresql:
  enabled: true
  fullnameOverride: postgresql
  global:
    # storageClass: nas
    postgresql:
      auth:
        postgresPassword: postgres
        database: univer

redis:
  enabled: true
  fullnameOverride: redis
  architecture: standalone
  auth:
    enabled: false

rabbitmq:
  enabled: true
  fullnameOverride: rabbitmq
  auth:
    username: guest
    password: guest
    securePassword: false

minio:
  enabled: true
  fullnameOverride: minio
  auth:
    rootUser: admin
    rootPassword: minioadmin
  defaultBuckets: "univer"